<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Xian Leaderboard (Sybil-Resistant + Bridging)</title>

  <!-- Bootstrap 5 CSS (CDN) -->
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
    rel="stylesheet"
  />

  <style>
    .leaderboard-table th {
      background-color: #f8f9fa; /* Slightly different background for table headers */
    }
  </style>
</head>
<body class="bg-light">
  
  <div class="container my-4">
    <h1 class="mb-4 text-center">Xian Leaderboard</h1>

    <!-- Row for Scoring Explanation -->
    <div class="row">
      <div class="col-12 col-lg-8 offset-lg-2">
        <div class="card mb-4">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0">How Scoring Works</h4>
          </div>
          <div class="card-body">
            <p>
              Each type of on-chain action on Xian awards a different number of points.
              Below is the current breakdown:
            </p>
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead class="table-secondary">
                  <tr>
                    <th>Action</th>
                    <th>Contract</th>
                    <th>Function</th>
                    <th>Points</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>DEX Swap</td>
                    <td>con_dex_v2</td>
                    <td>swapExactTokenForTokenSupportingFeeOnTransferTokens</td>
                    <td>+5</td>
                  </tr>
                  <tr>
                    <td>Add Liquidity</td>
                    <td>con_dex_v2</td>
                    <td>addLiquidity</td>
                    <td>+10</td>
                  </tr>
                  <tr>
                    <td>NFT Mint</td>
                    <td>con_pixel_frames</td>
                    <td>create_thing</td>
                    <td>+5</td>
                  </tr>
                  <tr>
                    <td>NFT Purchase</td>
                    <td>con_pixel_frames</td>
                    <td>buy_thing</td>
                    <td>+3</td>
                  </tr>
                  <tr>
                    <td>XNS Mint (Name Service)</td>
                    <td>con_name_service_final</td>
                    <td>mint_name</td>
                    <td>+2</td>
                  </tr>
                  <tr>
                    <td>Xian Token Transfer</td>
                    <td>currency</td>
                    <td>transfer</td>
                    <td>+1</td>
                  </tr>
                  <tr>
                    <td>Contract Deployment</td>
                    <td>submission</td>
                    <td>submit_contract</td>
                    <td>+15</td>
                  </tr>
                  <tr>
                    <td>Bridging USDC</td>
                    <td>con_usdc</td>
                    <td>mint</td>
                    <td>+5</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Sybil Resistance Explanation -->
        <div class="card mb-4">
          <div class="card-header bg-warning text-dark">
            <h4 class="mb-0">Sybil Resistance Rules</h4>
          </div>
          <div class="card-body">
            <p class="card-text">
              We apply the following checks to discourage trivial or spammy transactions:
            </p>
            <ul>
              <li><strong>Minimum Swap Amount:</strong> swaps below 10 tokens earn 0 points.</li>
              <li><strong>Minimum Transfer Amount:</strong> transfers below 1 token earn 0 points.</li>
              <li><strong>Liquidity Threshold:</strong> addLiquidity must have at least 5 tokens (A) and 100 tokens (B).</li>
              <li><strong>Unique Contract Code:</strong> repeated submissions of the same code yield 0 points (only the first is rewarded).</li>
              <li><strong>Bridging Threshold:</strong> bridging must be at least 10 USDC to earn points.</li>
            </ul>
            <p>
              For bridging, the points go to the <code>to</code> address (the bridged recipient), not the 
              contract or the transaction sender. This ensures real users, not the bridge contract, get rewarded.
            </p>
          </div>
        </div>

      </div>
    </div>

    <!-- Leaderboard -->
    <div class="row">
      <div class="col-12 col-lg-8 offset-lg-2">
        <div id="status" class="alert alert-info text-center" role="alert">
          Loading dataâ€¦
        </div>

        <div id="leaderboard-container" class="card" style="display: none;">
          <div class="card-header bg-success text-white">
            <h4 class="mb-0">Current Leaderboard</h4>
          </div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table id="leaderboard" class="table table-striped table-hover leaderboard-table mb-0">
                <thead>
                  <tr>
                    <th>Rank</th>
                    <th>Address</th>
                    <th>Points</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div> <!-- /.card-body -->
        </div> <!-- /.card -->
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
  </script>

  <!-- Leaderboard Logic -->
  <script src="main.js?v=2"></script>
</body>
</html>
