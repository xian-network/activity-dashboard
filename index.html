<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Xian Leaderboard – Volume + Sybil Checks</title>

  <!-- Bootstrap 5 CSS (CDN) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <style>
    .leaderboard-table th {
      background-color: #f8f9fa;
    }
  </style>
</head>
<body class="bg-light">

  <div class="container my-4">
    <h1 class="mb-4 text-center">Xian Leaderboard – Volume-Based + Sybil-Resistant</h1>

    <!-- Row: Explanation of Points -->
    <div class="row">
      <div class="col-12 col-lg-8 offset-lg-2">
        <!-- Card: Volume-Based Rewards -->
        <div class="card mb-4">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0">Points Breakdown</h4>
          </div>
          <div class="card-body">
            <p>
              We reward bridging and swapping based on the <strong>volume</strong> involved, 
              while other actions give fixed points. Here’s how it works:
            </p>
            <ul>
              <li><strong>Bridging (con_usdc / mint):</strong> 
                <code>1 point per 10 USDC</code>, capped at <code>100 points</code> per transaction. 
                <em>Points go to the address in <code>kwargs.to</code>.</em>
              </li>
              <li><strong>Swapping (con_dex_v2 / swapExactTokenForTokenSupportingFeeOnTransferTokens):</strong> 
                <code>1 point per 10 tokens swapped</code> (<code>amountIn</code>), 
                capped at <code>50 points</code> per transaction.
              </li>
              <li><strong>Add Liquidity (con_dex_v2 / addLiquidity):</strong> +10 points (fixed)</li>
              <li><strong>NFT Mint (con_pixel_frames / create_thing):</strong> +5 points (fixed)</li>
              <li><strong>NFT Purchase (con_pixel_frames / buy_thing):</strong> +3 points (fixed)</li>
              <li><strong>XNS Mint (con_name_service_final / mint_name):</strong> +2 points (fixed)</li>
              <li><strong>Xian Token Transfer (currency / transfer):</strong> +1 point (fixed)</li>
              <li><strong>Contract Deployment (submission / submit_contract):</strong> +15 points (fixed)</li>
            </ul>
          </div>
        </div>

        <!-- Card: Sybil Checks -->
        <div class="card mb-4">
          <div class="card-header bg-warning text-dark">
            <h4 class="mb-0">Sybil Resistance Checks</h4>
          </div>
          <div class="card-body">
            <p>
              To discourage trivial or spammy actions, we enforce these minimums and conditions:
            </p>
            <ul>
              <li><strong>Bridging Threshold:</strong> Must mint at least <code>10 USDC</code> in a single 
                transaction to earn points.</li>
              <li><strong>Swap Threshold:</strong> Must swap at least <code>10 tokens</code> (<code>amountIn</code>) 
                to get any points.</li>
              <li><strong>Transfer Threshold:</strong> Must transfer at least <code>1 token</code> to earn a point.</li>
              <li><strong>Liquidity Threshold:</strong> Must add at least <code>5 tokens (A)</code> and 
                <code>100 tokens (B)</code> in <code>addLiquidity</code> to get the +10 points.</li>
              <li><strong>Unique Contract Code:</strong> Only the first submission of a given contract code 
                (using <code>submit_contract</code>) gets points. Repeats of the exact same code yield 0.</li>
            </ul>
            <p class="mb-0">
              These checks ensure that the leaderboard reflects meaningful usage rather than
              micro-spamming or repeated duplications.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Row: Leaderboard -->
    <div class="row">
      <div class="col-12 col-lg-8 offset-lg-2">
        <div id="status" class="alert alert-info text-center" role="alert">
          Loading data…
        </div>

        <div id="leaderboard-container" class="card" style="display: none;">
          <div class="card-header bg-success text-white">
            <h4 class="mb-0">Current Leaderboard</h4>
          </div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table id="leaderboard" class="table table-striped table-hover leaderboard-table mb-0">
                <thead>
                  <tr>
                    <th>Rank</th>
                    <th>Address</th>
                    <th>Points</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div> <!-- /.card-body -->
        </div> <!-- /.card -->
      </div>
    </div>
  </div>

  <!-- Bootstrap JS (optional) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
  </script>
  <script src="main.js?v=3"></script>
</body>
</html>
